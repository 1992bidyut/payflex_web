Index: application/models/User_model.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nclass User_model extends CI_Model\r\n{\r\n\t//FOR LOGIN USER BY SANKER\r\n\tpublic function loginValid($username,$password){\r\n\r\n\t\t$query = $this->db->where(['username'=>$username,'password'=>$password])\r\n\t\t\t\t->get('tbl_user');\r\n\r\n\t\tif($query->num_rows() === 1 )\r\n\t\t{\r\n\t\t\t$sqlReturn = $query->row_array();\r\n\t\t}else{\r\n\t\t\t$sqlReturn = false;\r\n\t\t}\r\n\t\t\r\n\t//\tdie($this->db->last_query());\r\n\t\treturn $sqlReturn;\r\n\t}\r\n\r\n\r\n\r\n\t//FOR GETTING ALL USER BY SANKER\r\n\tpublic function getAllUser(){\r\n\t\t\t$this->db->select('*')\r\n\t\t\t\t\t ->from('tbl_user')\r\n\t\t\t\t\t ->join('tbl_user_type','tbl_user_type.id = tbl_user.user_type','left');\r\n\t\t\t$result = $this->db->get();\r\n\r\n//\t\techo $this->db->last_query();\r\n//\t\tdie();\r\n\r\n\t\treturn $result->result_array();\r\n\t}\r\n\r\n\tpublic function getAllUserData()\r\n\t{\r\n\t\t$result = $this->db->get('cd_user');\r\n\t\treturn $result->result_array();\r\n\t}\r\n\t//FOR GETTING ALL USER BY SANKER\r\n\tpublic function getUserCreditInfo(){\r\n\t\t\t$this->db->select('cd_user.id as cd_user_id,\r\n\t\t\t\t\t\t\t   cd_user.username,\r\n\t\t\t\t\t\t\t   cd_user.role_id,\r\n\t\t\t\t\t\t\t   role_name.role_name,\r\n\t\t\t\t\t\t\t   credits.id as creditsID,\r\n\t\t\t\t\t\t\t   credits.remaining_credit,\r\n\t\t\t\t\t\t\t   credits.accStatus')\r\n\t\t\t\t\t ->from('cd_user')\r\n\t\t\t\t\t ->join('credits','credits.cd_user_id = cd_user.id','left')\r\n\t\t\t\t\t ->join('role_name','cd_user.role_id = role_name.role_id','left')\r\n\t\t\t\t\t ->where('credits.accStatus',1);\r\n\t\t\t$result = $this->db->get();\r\n\r\n//\t\techo $this->db->last_query();\r\n//\t\tdie();\r\n\t\t\treturn $result->result_array();\r\n\r\n\r\n\t}\r\n\r\n\tpublic function create_group($posts){\r\n\r\n\t\t$this->db->insert('categories',$posts);\r\n\t\tif($this->db->affected_rows() > 0){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//FOR CREATING USER STEP ONE OF TWO BY SANKER\r\n\tpublic function createUserStepOne($posts){\r\n\t\t$this->db->insert('cd_user',$posts);\r\n\r\n\t\tif($this->db->insert_id())\r\n\t\t{\r\n\t\t\treturn $this->db->insert_id();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//FOR CREATING USER FINAL STEP BY SANKER\r\n\tpublic function createUserFinalStep($forContactInformationTbl){\r\n\r\n\t\t$this->db->insert('contact_information',$forContactInformationTbl);\r\n\r\n\t\tif($this->db->insert_id())\r\n\t\t{\r\n\t\t\treturn $this->db->insert_id();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic function totalSent(){\r\n\r\n\t\t$this->db->select('cd_user_id,COUNT(msg_status) AS totalSent')\r\n\t\t\t\t->group_by('cd_user_id')\r\n\t\t\t\t->from('msg_outbox')\r\n\t\t\t\t->where('msg_status','2');\r\n\t\t$sent = $this->db->get()->result_array();\r\n\r\n\r\n\r\n\t\treturn $sent;\r\n\r\n\t}\r\n\r\n\r\n\t// public function totalPending(){\r\n\t\t// $status = array('-10','-7','-6','-4','-3','-1','0');\r\n\r\n\t\t// $this->db->select('cd_user_id,COUNT(msg_status) AS totalPending')\r\n\t\t\t\t// ->group_by('cd_user_id')\r\n\t\t\t\t// ->from('msg_outbox')\r\n\t\t\t\t// ->where_in('msg_status', $status);\r\n\t\t// $pending = $this->db->get()->result_array();\r\n\r\n\t\t// return $pending;\r\n\r\n\t// }\r\n\tpublic function totalPending(){\r\n\r\n\t\t$this->db->select(\r\n\t\t\t\t'msg_outbox.cd_user_id,COUNT(msg_status) AS totalPending')\r\n\t\t\t\t->group_by('cd_user_id')\r\n\t\t\t\t->from('msg_outbox')\r\n\t\t\t\t->join('statuses','msg_outbox.msg_status = statuses.status_code','left')\r\n\t\t\t\t->join('statuses_group','statuses.status_group_id = statuses_group.id','left')\r\n\t\t\t\t->where('status_group_id',2);\r\n\t\t$resource = $this->db->get();\r\n\t\treturn $resource->result_array();\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tpublic function newUserStore(){\r\n\t\t$data=array();\r\n\t\t$data['name'] = $this->input->post('name',true);\r\n\t\t\r\n\t\t$data['username'] = $this->input->post('email',true);\r\n\t\t$data['email'] = $this->input->post('email',true);\r\n\t\t$data['contact'] = $this->input->post('contact',true);\r\n\t\t$data['username'] = $this->input->post('email',true);\r\n\t\t$data['password'] = $this->input->post('password',true);\r\n\t\t$this->db->insert('tbl_user',$data);\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tpublic function get_user_info( $user_id )\r\n\t{\r\n\t\t$this->db->from('cd_user');\r\n\t\t$this->db->where('id', $user_id);\r\n\t\t$this->db->join('role_name', 'cd_user.role_id = role_name.role_id', 'left');\r\n\t\t$rslt = $this->db->get();\r\n\t\t\r\n\t\tif( $rslt->num_rows() > 0 )\treturn $rslt->row();\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic function getUserInfo($userId){\r\n\t\t$this->db->where('id',$userId)\r\n\t\t\t     ->select('id,username');\r\n\t\t$resource  = $this->db->get('cd_user');\r\n\t\tif($resource->num_rows() == 1)\r\n\t\t{\r\n\t\t\treturn $resource->row_array();\r\n\t\t}else\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function updatePassword($id,$posts){\r\n\r\n\t\t$this->db->where('id',$id);\r\n\t\t$this->db->update('cd_user',$posts);\r\n\r\n\t\tif($this->db->affected_rows() > 0){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function inactiveUser($id,$posts){\r\n\r\n\t\t$this->db->where('id',$id)\r\n\t\t\t\t ->update('cd_user',$posts);\r\n\r\n\t\tif($this->db->affected_rows() > 0){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic function activeUser($id,$posts){\r\n\r\n\t\t$this->db->where('id',$id)\r\n\t\t\t\t ->update('cd_user',$posts);\r\n\r\n\t\tif($this->db->affected_rows() > 0){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic function get_my_users()\r\n\t{\r\n\t\t$user_id = current_user();\r\n\t\t\r\n\t\t$this->db->from('cd_user');\r\n\t\t$this->db->where('parent_id', $user_id);\r\n\t\t$rslt = $this->db->get();\r\n\t\t\r\n\t\tif( $rslt->num_rows() > 0 )\treturn $rslt->result_array();\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic function get_user_by_username( $username )\r\n\t{\r\n\t\t$this->db->from('cd_user');\r\n\t\t$this->db->where('username', $username);\r\n\t\t$rslt = $this->db->get();\r\n\t\t\r\n\t\tif( $rslt->num_rows() > 0 )\treturn $rslt->row();\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tfunction csv($userid)\r\n\t{\r\n        $this->load->dbutil();\r\n        $this->load->helper('file');\r\n        $this->load->helper('download');\r\n        \r\n\t\t$this->db->select('contact_information.full_name,contact_info.contact_text');\r\n\t\t\t\t$this->db->from('contact_information');\r\n\t\t\t\t$this->db->join('contact_info' ,'contact_information.id = contact_info.contact_information_id AND contact_type_id=1');\r\n\t\t\t\t$this->db->where_in('contact_info.contact_type_id', '1');\r\n\t\t\t\t$this->db->where_in('contact_information.cd_user_id',$userid);\r\n\t\t\t\t$this->db->group_by('contact_info.id');\r\n\t\t\t\t $query = $this->db->get(); \r\n\t\t\t\t\r\n        $delimiter = \",\";\r\n        $newline = \"\\r\\n\";\r\n        $data = $this->dbutil->csv_from_result($query, $delimiter, $newline);\r\n        force_download('CSV_Report.csv', $data);\r\n}\r\n\r\n\tpublic function get_user_info_mask( $user_id )\r\n\t{\r\n\t\t$this->db->from('cd_user');\r\n\t\t$this->db->select('cd_user.id as id,cd_user.*,mask.id as mask_id,mask.mask_text as mask_text,mask.cd_user_id as cd_user_id,mask.is_acive as is_acive,mask.is_default as is_default,mask.is_approved as is_approved');\t\r\n\t\t$this->db->where('cd_user.id', $user_id);\r\n\t\t\r\n\t\t$this->db->join('mask', 'mask.cd_user_id= cd_user.id', 'inner');\r\n\t\t$rslt = $this->db->get()->result();\r\n\t\t\r\n\t\treturn $rslt;\r\n\t}\r\n\t\r\n\r\n\tpublic function get_user_default_mask( $user_id )\r\n\t{\r\n\t\t$this->db->from('cd_user');\r\n\t\t$this->db->select('cd_user.id as id,cd_user.*,mask.id as mask_id,mask.mask_text as mask_text,mask.cd_user_id as cd_user_id,mask.is_acive as is_acive,mask.is_default as is_default,mask.is_approved as is_approved');\t\r\n\t\t$this->db->where('cd_user.id', $user_id);\r\n\t\t$this->db->where('mask.is_default', 1);\r\n\t\t\r\n\t\t$this->db->join('mask', 'mask.cd_user_id= cd_user.id', 'inner');\r\n\t\t$rslt = $this->db->get()->row();\r\n\t\t\r\n\t\treturn $rslt;\r\n\t}\r\n\t\r\n\t\r\n\tpublic function getCreditByUserName($userName='')\r\n\t{\r\n\t\t$myCreditSQL='SELECT tblBal.*, (sC-sU) AS sBalance FROM \r\n\t\t(\r\n\t\tSELECT cd_user.username, SUM( credits.sms_credit ) AS sC, SUM( credits.sms_usage ) AS sU \r\n\t\tFROM credits\r\n\t\tLEFT JOIN cd_user ON credits.cd_user_id=cd_user.id\r\n\t\tWHERE cd_user.username =\"'.$userName.'\" \r\n\t\tAND credits.cd_user_id!=1\r\n\t\tGROUP BY credits.cd_user_id, cd_user.username\r\n\t\tORDER BY cd_user.username\r\n\t\t) AS tblBal\r\n\t\tORDER BY sBalance ASC ';\r\n\t\t$rslt = $this->db->query($myCreditSQL);\r\n\t\tif($rslt->num_rows()>0)\r\n\t\t{\r\n\t\t\r\n\t\t\treturn $row = $rslt->row_array(); ;//$rslt->result();\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tpublic function get_current_user_info( )\r\n\t{\r\n\t\t$user_id = current_user();\r\n\t\t\t\r\n\t\t$this->db->from('cd_user');\r\n\t\t$this->db->where('cd_user.id', $user_id);\r\n\t\t$this->db->where('contact_information.is_parent',1);\r\n\t\t\r\n\t\t$this->db->join('contact_information', 'cd_user.id = contact_information.cd_user_id', 'left');\r\n\t\t//$this->db->join('contact_info', 'contact_information.id = contact_info.contact_information_id', 'left');\r\n\t\t$rslt = $this->db->get();\r\n\t\t\r\n\t\treturn $rslt;\r\n\t}\r\n\t\r\n\tpublic function get_all_user()\r\n\t{\r\n\t\t$query = \"SELECT * FROM (`cd_user`) LEFT JOIN `role_name` ON `cd_user`.`role_id` = `role_name`.`role_id` WHERE `role_name`.`role_id` != 1 \";\r\n\t\t\r\n\t\treturn $this->db->query($query)->result_array();\r\n\t}\r\n\t\r\n\tpublic function auto_search_user($userId = '')\r\n\t{\r\n\t\t// print_r($userId);\r\n\t\t// die;\r\n\t\t//print_r($_POST['user']);\r\n\t\t$query = \"SELECT * FROM (`cd_user`) LEFT JOIN `role_name` ON `cd_user`.`role_id` = `role_name`.`role_id` WHERE `cd_user`.`id` IN ('$userId') AND `role_name`.`role_id` != 1 \";\r\n\t\r\n\t\treturn $this->db->query($query)->result_array();\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic function search_user()\r\n\t{\t$asd=$_POST['user'];\r\n\t\t//print_r($_POST['user']);\r\n\t\t$query = \"SELECT * FROM (`cd_user`) LEFT JOIN `role_name` ON `cd_user`.`role_id` = `role_name`.`role_id` WHERE `cd_user`.`username` IN ('$asd') AND `role_name`.`role_id` != 1 \";\r\n\t\tforeach($_POST['user'] as $row )\r\n\t\t{\r\n\t\t $query .= \" OR `cd_user`.`username` LIKE '%$row%'\";\r\n\t\t}\t\t\r\n\t\r\n\t\treturn $this->db->query($query)->result_array();\r\n\t\t\r\n\t}\r\n\r\n\tpublic function searchUser($search){\r\n\r\n\t\t$this->db->select(\"id,username,role_id,parent_id\");\r\n\t\t$whereCondition = array('username' => $search);\r\n\t\t$this->db->where($whereCondition);\r\n\t\t$this->db->from('cd_user');\r\n\t\t$query = $this->db->get();\r\n\t\treturn $query->result();\r\n\r\n\t}\r\n\t\r\n\tpublic function delete_user( $user_id )\r\n\t{\r\n\t\tif( $user_id == 1 )\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$this->db->delete('cd_user', array('id' => (int) $user_id ));\r\n\t\t//$this->db->delete('rel_program_user', array('cd_user_id' => (int) $user_id ));\r\n\t}\r\n\t\r\n\t\r\n\tpublic function program_permission()\r\n\t{\r\n\t\t$this->db->order_by('permission');\r\n\t\t$this->db->from('tbl_program_permission');\r\n\t\t$rslt = $this->db->get();\r\n\t\t\r\n\t\t$sel = array();\r\n\t\tforeach( $rslt->result() as $row )\r\n\t\t\t$sel[ $row->id ] = $row->permission;\r\n\t\treturn $sel;\r\n\t}\r\n\t\r\n\t\r\n\tpublic function set_program_permission( $in_data)\r\n\t{\r\n\t\t$this->db->insert('rel_program_user', $in_data);\r\n\t}\r\n\t\r\n\tpublic function get_user_program_permission( $user_id )\r\n\t{\r\n\t\t\r\n\t\t$this->db->select('rel_program_user.*, tbl_program.name, tbl_program_permission.permission');\r\n\t\t\r\n\t\t$this->db->from('rel_program_user');\r\n\t\t$this->db->join('cd_user', 'cd_user.id = cd_user_id');\t\t\r\n\t\t$this->db->join('tbl_program', 'tbl_program.id = tbl_program_id');\r\n\t\t$this->db->join('tbl_program_permission', 'tbl_program_permission.id = tbl_program_permission_id');\r\n\t\t\r\n\t\t$this->db->where('cd_user.id', $user_id);\r\n\t\t\r\n\t\t$this->db->order_by('name');\r\n\t\t$this->db->order_by('permission');\r\n\t\t\r\n\t\treturn $this->db->get();\r\n\t}\r\n\t\r\n\tpublic function delete_program_permission( $id )\r\n\t{\r\n\t\t$this->db->where('id', $id);\r\n\t\t$this->db->delete('rel_program_user');\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n    public function insertNewCredit($creditData)\r\n    {\r\n\r\n        $this->db->insert('credits', $creditData);\r\n//\t\techo $this->db->last_query();\r\n//\t\tdie();\r\n\r\n        if ($this->db->insert_id()) {\r\n            return $this->db->insert_id();\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    function addMask($maskData){\r\n\r\n        $this->db->insert('mask',$maskData);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function addRoute1($routeOperatorData1){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData1);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    function addRoute2($routeOperatorData2){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData2);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function addRoute3($routeOperatorData3){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData3);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    function addRoute4($routeOperatorData4){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData4);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    function addRoute5($routeOperatorData5){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData5);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    function addRoute6($routeOperatorData6){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData6);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function addRoute7($routeOperatorData7){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData7);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    function addRoute8($routeOperatorData8){\r\n\r\n        $this->db->insert('operator_user',$routeOperatorData8);\r\n\r\n        if($this->db->insert_id())\r\n        {\r\n            return $this->db->insert_id();\r\n        }\r\n        else\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\tpublic function getAllUserType(){\r\n\t\t$resource = $this->db->get('tbl_user_type');\r\n\r\n\t\tif($resource->num_rows() > 0){\r\n\t\t\treturn $resource->result_array();\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t\r\n\r\n}\r\n\r\n\r\n?>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- application/models/User_model.php	(revision e2d75ce147310f6e8a623f8ef7123cb65544e60d)
+++ application/models/User_model.php	(date 1597249750867)
@@ -4,17 +4,17 @@
 {
 	//FOR LOGIN USER BY SANKER
 	public function loginValid($username,$password){
-
-		$query = $this->db->where(['username'=>$username,'password'=>$password])
-				->get('tbl_user');
-
+		$query = $this->db->select('*')
+			->from('tbl_user')
+			->where('tbl_user.username',$username)
+			->where('tbl_user.password',$password)
+			->get();
 		if($query->num_rows() === 1 )
 		{
 			$sqlReturn = $query->row_array();
 		}else{
 			$sqlReturn = false;
 		}
-		
 	//	die($this->db->last_query());
 		return $sqlReturn;
 	}
Index: application/controllers/Login.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\ndefined('BASEPATH') OR exit('No direct script access allowed');\r\n\r\nclass Login extends CI_Controller {\r\n\r\n    function __construct()\r\n    {\r\n        parent::__construct();\r\n        $this->load->model('user_model');\r\n\r\n    }\r\n\r\n    public function index()\r\n    {\r\n        if($this->session->userdata('user_id'))\r\n        {\r\n            return redirect('dashboard');\r\n        }\r\n\r\n        $this->load->view('user/loginPage');\r\n\r\n    }\r\n\r\n    public function login(){\r\n\r\n\r\n        $this->load->library('form_validation');\r\n\r\n        if($this->form_validation->run('login') == FALSE){\r\n\r\n            $this->load->view('user/loginPage');\r\n\r\n        }else{\r\n\r\n            $username  = $this->input->post('username');\r\n            $password   = sha1($this->input->post('password'));\r\n\r\n            // echo \"<pre>\";\r\n            // var_dump($username);\r\n            // var_dump($password);\r\n            // die();\r\n            $user_array = $this->user_model->loginValid($username,$password);\r\n\r\n\r\n            if($user_array['user_type'] == 3 || $user_array['permission'] == 1 ){\r\n\r\n\r\n                $this->session->set_userdata(\r\n                    array(\r\n                        'user_id'       => $user_array['id'],\r\n                        'user_name'     => $user_array['username'],\r\n                      //  'user_role_id'  => $user_array['role_id'],\r\n                      //  'user_parent_id'=> $user_array['parent_id']\r\n                    )\r\n                );\r\n\r\n\r\n                //$this->session->set_flashdata('success_msg','Login Success');\r\n                return redirect('dashboard');\r\n\r\n            }\r\n            elseif($user_array['status'] == '-1')\r\n            {\r\n                $this->session->set_flashdata('error_msg','Your account is inactive please contact with admin');\r\n                $this->load->view('user/loginPage');\r\n            }\r\n            else{\r\n                $this->session->set_flashdata('error_msg','User name or Password did not matched!');\r\n\r\n                $this->load->view('user/loginPage');\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    public function logout(){\r\n\r\n        // $this->session->unset_userdata();\r\n        $this->session->sess_destroy();\r\n        return redirect('login');\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- application/controllers/Login.php	(revision e2d75ce147310f6e8a623f8ef7123cb65544e60d)
+++ application/controllers/Login.php	(date 1597250797521)
@@ -2,12 +2,10 @@
 defined('BASEPATH') OR exit('No direct script access allowed');
 
 class Login extends CI_Controller {
-
     function __construct()
     {
         parent::__construct();
         $this->load->model('user_model');
-
     }
 
     public function index()
@@ -16,35 +14,24 @@
         {
             return redirect('dashboard');
         }
-
         $this->load->view('user/loginPage');
-
     }
 
     public function login(){
-
-
         $this->load->library('form_validation');
-
         if($this->form_validation->run('login') == FALSE){
-
             $this->load->view('user/loginPage');
-
         }else{
-
             $username  = $this->input->post('username');
             $password   = sha1($this->input->post('password'));
-
             // echo "<pre>";
             // var_dump($username);
             // var_dump($password);
             // die();
             $user_array = $this->user_model->loginValid($username,$password);
-
-
-            if($user_array['user_type'] == 3 || $user_array['permission'] == 1 ){
-
-
+            echo print_r($user_array);
+//            if($user_array['user_type'] == 3 || $user_array['permission'] == 1 )
+            if($user_array['user_type'] != 3){
                 $this->session->set_userdata(
                     array(
                         'user_id'       => $user_array['id'],
@@ -53,32 +40,22 @@
                       //  'user_parent_id'=> $user_array['parent_id']
                     )
                 );
-
-
                 //$this->session->set_flashdata('success_msg','Login Success');
                 return redirect('dashboard');
-
-            }
-            elseif($user_array['status'] == '-1')
+            } elseif($user_array['user_type'] == 3)
             {
-                $this->session->set_flashdata('error_msg','Your account is inactive please contact with admin');
+                $this->session->set_flashdata('error_msg','Sorry! You are not authorize to login here!');
                 $this->load->view('user/loginPage');
             }
             else{
                 $this->session->set_flashdata('error_msg','User name or Password did not matched!');
-
                 $this->load->view('user/loginPage');
-
             }
-
         }
-
     }
     public function logout(){
-
         // $this->session->unset_userdata();
         $this->session->sess_destroy();
         return redirect('login');
-
     }
 }
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"BranchesTreeState\">\r\n    <expand>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"LOCAL_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n      <path>\r\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n        <item name=\"GROUP_NODE:origin\" type=\"e8cecc67:BranchNodeDescriptor\" />\r\n      </path>\r\n    </expand>\r\n    <select />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"571daff3-120e-4fae-92da-81dcf9e1bc68\" name=\"Default Changelist\" comment=\"cpanel.yml\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/application/models/OrdersModel.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/application/models/OrdersModel.php\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ComposerSettings\" doNotAsk=\"true\" synchronizationState=\"SYNCHRONIZE\">\r\n    <pharConfigPath>$PROJECT_DIR$/composer.json</pharConfigPath>\r\n    <execution />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"CSS File\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"master\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1fig0yWIAnMif1XcwFQ0DLNpMCa\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"DatabaseDriversLRU\" value=\"sqlserver&#10;mysql\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/../../API/PayFlexAPI1v1\" />\r\n    <property name=\"list.type.of.created.stylesheet\" value=\"CSS\" />\r\n    <property name=\"nodejs_package_manager_path\" value=\"npm\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"preferences.lookFeel\" />\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" BundledDictionaries=\"0\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" Dictionaries=\"0\" CorrectionsLimit=\"5\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" />\r\n  <component name=\"SvnConfiguration\">\r\n    <configuration />\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"571daff3-120e-4fae-92da-81dcf9e1bc68\" name=\"Default Changelist\" comment=\"\" />\r\n      <created>1596706108773</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1596706108773</updated>\r\n      <workItem from=\"1596706110093\" duration=\"11047000\" />\r\n      <workItem from=\"1596797024482\" duration=\"719000\" />\r\n      <workItem from=\"1596857361145\" duration=\"1195000\" />\r\n      <workItem from=\"1596879823858\" duration=\"9005000\" />\r\n      <workItem from=\"1596941177397\" duration=\"1164000\" />\r\n      <workItem from=\"1597027472132\" duration=\"891000\" />\r\n      <workItem from=\"1597028926597\" duration=\"3163000\" />\r\n      <workItem from=\"1597032113630\" duration=\"16716000\" />\r\n      <workItem from=\"1597076139624\" duration=\"498000\" />\r\n      <workItem from=\"1597115412819\" duration=\"1543000\" />\r\n      <workItem from=\"1597155321416\" duration=\"846000\" />\r\n      <workItem from=\"1597167800540\" duration=\"14279000\" />\r\n      <workItem from=\"1597167800540\" duration=\"9143000\" />\r\n      <workItem from=\"1597182746518\" duration=\"2100000\" />\r\n      <workItem from=\"1597192289388\" duration=\"772000\" />\r\n      <workItem from=\"1597231552482\" duration=\"619000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"employee order set on leaderboard\">\r\n      <created>1597183979092</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1597183979092</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"employee order set on leaderboard\">\r\n      <created>1597184125139</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1597184125140</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"employee order set on leaderboard\">\r\n      <created>1597184152814</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1597184152814</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"payment date filter set on leaderboard\">\r\n      <created>1597189607968</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1597189607968</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"demo database add\">\r\n      <created>1597192529004</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1597192529004</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"marge bdn_dev\">\r\n      <created>1597194014256</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1597194014256</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"marge bdn_dev\">\r\n      <created>1597194193339</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1597194193339</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"8\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"2\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"employee order set on leaderboard\" />\r\n    <MESSAGE value=\"payment date filter set on leaderboard\" />\r\n    <MESSAGE value=\"demo database add\" />\r\n    <MESSAGE value=\"marge bdn_dev\" />\r\n    <MESSAGE value=\"remote image path set\" />\r\n    <MESSAGE value=\"cpanel.yml\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"cpanel.yml\" />\r\n  </component>\r\n  <component name=\"WindowStateProjectService\">\r\n    <state x=\"361\" y=\"70\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog\" timestamp=\"1597050480867\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"361\" y=\"70\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1597050480867\" />\r\n    <state x=\"549\" y=\"172\" key=\"FileChooserDialogImpl\" timestamp=\"1597190592823\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"834\" />\r\n    </state>\r\n    <state x=\"549\" y=\"172\" key=\"FileChooserDialogImpl/0.0.1536.834/1920.0.1366.738@0.0.1536.834\" timestamp=\"1597190592823\" />\r\n    <state x=\"294\" y=\"66\" key=\"MergeDialog\" timestamp=\"1597193961659\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"834\" />\r\n    </state>\r\n    <state x=\"294\" y=\"66\" key=\"MergeDialog/0.0.1536.834/1920.0.1366.738@0.0.1536.834\" timestamp=\"1597193961659\" />\r\n    <state x=\"657\" y=\"285\" width=\"626\" height=\"264\" key=\"MultipleFileMergeDialog\" timestamp=\"1597193961667\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"834\" />\r\n    </state>\r\n    <state x=\"657\" y=\"285\" width=\"626\" height=\"264\" key=\"MultipleFileMergeDialog/0.0.1536.834/1920.0.1366.738@0.0.1536.834\" timestamp=\"1597193961667\" />\r\n    <state x=\"391\" y=\"81\" key=\"SettingsEditor\" timestamp=\"1597032242364\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"391\" y=\"81\" key=\"SettingsEditor/0.0.1536.824@0.0.1536.824\" timestamp=\"1597032242364\" />\r\n    <state x=\"361\" y=\"137\" key=\"Vcs.Push.Dialog.v2\" timestamp=\"1597194196427\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"834\" />\r\n    </state>\r\n    <state x=\"361\" y=\"137\" key=\"Vcs.Push.Dialog.v2/0.0.1536.834/1920.0.1366.738@0.0.1536.834\" timestamp=\"1597194196427\" />\r\n    <state x=\"561\" y=\"232\" width=\"413\" height=\"352\" key=\"com.intellij.database.psi.DbRenamePsiElementProcessor.DbRenameDialog\" timestamp=\"1597174798873\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"561\" y=\"232\" width=\"413\" height=\"352\" key=\"com.intellij.database.psi.DbRenamePsiElementProcessor.DbRenameDialog/0.0.1536.824@0.0.1536.824\" timestamp=\"1597174798873\" />\r\n    <state x=\"579\" y=\"331\" key=\"com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2\" timestamp=\"1597193064700\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"834\" />\r\n    </state>\r\n    <state x=\"579\" y=\"331\" key=\"com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1536.834/1920.0.1366.738@0.0.1536.834\" timestamp=\"1597193064700\" />\r\n    <state x=\"477\" y=\"11\" width=\"581\" height=\"801\" key=\"find.popup\" timestamp=\"1597029999478\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"477\" y=\"11\" width=\"581\" height=\"801\" key=\"find.popup/0.0.1536.824@0.0.1536.824\" timestamp=\"1597029999478\" />\r\n    <state x=\"425\" y=\"187\" key=\"run.anything.popup\" timestamp=\"1597027700855\">\r\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\r\n    </state>\r\n    <state x=\"425\" y=\"187\" key=\"run.anything.popup/0.0.1536.824@0.0.1536.824\" timestamp=\"1597027700855\" />\r\n    <state x=\"623\" y=\"225\" width=\"672\" height=\"678\" key=\"search.everywhere.popup\" timestamp=\"1596710911768\">\r\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\r\n    </state>\r\n    <state x=\"623\" y=\"225\" width=\"672\" height=\"678\" key=\"search.everywhere.popup/-1920.8.1920.1040/0.0.1920.1040/1920.-368.1080.1880@0.0.1920.1040\" timestamp=\"1596710911768\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/workspace.xml	(revision e2d75ce147310f6e8a623f8ef7123cb65544e60d)
+++ .idea/workspace.xml	(date 1597248271014)
@@ -19,9 +19,12 @@
     <select />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="571daff3-120e-4fae-92da-81dcf9e1bc68" name="Default Changelist" comment="cpanel.yml">
+    <list default="true" id="571daff3-120e-4fae-92da-81dcf9e1bc68" name="Default Changelist" comment="contact type model bug fix">
+      <change beforePath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_8_12_2020_4_35_AM__Default_Changelist_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_8_12_2020_4_35_AM__Default_Changelist_.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_8_12_2020_4_31_AM__Default_Changelist_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_8_12_2020_4_31_AM__Default_Changelist_.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/application/models/OrdersModel.php" beforeDir="false" afterPath="$PROJECT_DIR$/application/models/OrdersModel.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/application/controllers/Login.php" beforeDir="false" afterPath="$PROJECT_DIR$/application/controllers/Login.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/application/models/User_model.php" beforeDir="false" afterPath="$PROJECT_DIR$/application/models/User_model.php" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_8_12_2020_4_35_AM__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_8_12_2020_4_35_AM__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_8_12_2020_4_31_AM__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_8_12_2020_4_31_AM__Default_Changelist_.xml
